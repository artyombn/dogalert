{% extends 'base.html' %}

{% block title %}
    –ó–¥–æ—Ä–æ–≤—å–µ –ø–∏—Ç–æ–º—Ü–∞
{% endblock %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="/static/css/menu/health.css">
{% endblock %}

{% block body %}
    <h1 class="section-title">–ó–¥–æ—Ä–æ–≤—å–µ {{ pet.name }}</h1>

    <form id="healthForm" class="health-form">
        <div class="health-card-list">
            <div class="health-card">
                <div class="health-section">
                    <div class="health-section-header">
                        <div class="health-record-icon">üíâ</div>
                        <h3 class="section-title-small">–í–∞–∫—Ü–∏–Ω–∞—Ü–∏—è</h3>
                    </div>
                    <div class="form-group">
                        <label for="last_vaccination">–ü–æ—Å–ª–µ–¥–Ω—è—è –≤–∞–∫—Ü–∏–Ω–∞—Ü–∏—è:</label>
                        <input type="date" id="last_vaccination" name="last_vaccination"
                               value="{{ pet.last_vaccination_iso if pet.last_vaccination_iso else '' }}">
                        <span class="current-date">{{ pet.last_vaccination if pet.last_vaccination else '–ù–µ —É–∫–∞–∑–∞–Ω–æ' }}</span>
                    </div>
                    <div class="form-group">
                        <label for="next_vaccination">–°–ª–µ–¥—É—é—â–∞—è –≤–∞–∫—Ü–∏–Ω–∞—Ü–∏—è:</label>
                        <input type="date" id="next_vaccination" name="next_vaccination"
                               value="{{ pet.next_vaccination_iso if pet.next_vaccination_iso else '' }}">
                        <span class="current-date">{{ pet.next_vaccination if pet.next_vaccination else '–ù–µ —É–∫–∞–∑–∞–Ω–æ' }}</span>
                    </div>
                </div>
            </div>

            <div class="health-card">
                <div class="health-section">
                    <div class="health-section-header">
                        <div class="health-record-icon">ü™±</div>
                        <h3 class="section-title-small">–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç –ø–∞—Ä–∞–∑–∏—Ç–æ–≤</h3>
                    </div>
                    <div class="form-group">
                        <label for="last_parasite_treatment">–ü–æ—Å–ª–µ–¥–Ω—è—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:</label>
                        <input type="date" id="last_parasite_treatment" name="last_parasite_treatment"
                               value="{{ pet.last_parasite_treatment_iso if pet.last_parasite_treatment_iso else '' }}">
                        <span class="current-date">{{ pet.last_parasite_treatment if pet.last_parasite_treatment else '–ù–µ —É–∫–∞–∑–∞–Ω–æ' }}</span>
                    </div>
                    <div class="form-group">
                        <label for="next_parasite_treatment">–°–ª–µ–¥—É—é—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:</label>
                        <input type="date" id="next_parasite_treatment" name="next_parasite_treatment"
                               value="{{ pet.next_parasite_treatment_iso if pet.next_parasite_treatment_iso else '' }}">
                        <span class="current-date">{{ pet.next_parasite_treatment if pet.next_parasite_treatment else '–ù–µ —É–∫–∞–∑–∞–Ω–æ' }}</span>
                    </div>
                </div>
            </div>

            <div class="health-card">
                <div class="health-section">
                    <div class="health-section-header">
                        <div class="health-record-icon">üêú</div>
                        <h3 class="section-title-small">–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç –∫–ª–µ—â–µ–π</h3>
                    </div>
                    <div class="form-group">
                        <label for="last_fleas_ticks_treatment">–ü–æ—Å–ª–µ–¥–Ω—è—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:</label>
                        <input type="date" id="last_fleas_ticks_treatment" name="last_fleas_ticks_treatment"
                               value="{{ pet.last_fleas_ticks_treatment_iso if pet.last_fleas_ticks_treatment_iso else '' }}">
                        <span class="current-date">{{ pet.last_fleas_ticks_treatment if pet.last_fleas_ticks_treatment else '–ù–µ —É–∫–∞–∑–∞–Ω–æ' }}</span>
                    </div>
                    <div class="form-group">
                        <label for="next_fleas_ticks_treatment">–°–ª–µ–¥—É—é—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:</label>
                        <input type="date" id="next_fleas_ticks_treatment" name="next_fleas_ticks_treatment"
                               value="{{ pet.next_fleas_ticks_treatment_iso if pet.next_fleas_ticks_treatment_iso else '' }}">
                        <span class="current-date">{{ pet.next_fleas_ticks_treatment if pet.next_fleas_ticks_treatment else '–ù–µ —É–∫–∞–∑–∞–Ω–æ' }}</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="save-button" id="saveButton">
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
            </button>
        </div>
    </form>

    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
        <span>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...</span>
    </div>
{% endblock %}

{% block tg_button %}
    <script src="/static/js/backButtonController.js"></script>
    <script src="/static/js/updateHealthPet.js"></script>
    <script>
        saveCurrentPathAsPrevious();
        setupBackButton(true);
        initHealthForm('{{ pet.id }}');
    </script>
{% endblock %}