{% extends 'base.html' %}

{% block title %}
    Регистрация
{% endblock %}

{% block body %}
    <h1>Регистрация</h1>
    <h3>Telegram ID = {{ telegram_user.id }}</h3>
    <br>
    <img src="{{ telegram_user.photo_url }}" alt="Аватар" style="width: 100px; height: 100px; border-radius: 50%;">
    <form method="POST" action="/registration/2?initData={{ initData | urlencode }}">
        <div class="form-group">
            <div style="display: flex; align-items: center; gap: 10px; margin-top: 25px">
                <label for="first_name" style="text-align: left">Имя: </label>
                <input type="text" class="form-control" id="first_name"
                       name="first_name" value="{{ first_name if first_name else telegram_user.first_name }}"
                       placeholder="{{ telegram_user.first_name if telegram_user.first_name else 'Введите имя' }}">
            </div>
            {% if errors %}
                <div class="text-danger">
                    {% for error in errors %}
                        {% if error['loc'][0] == 'first_name' %}
                            <p>{{ error['msg'] }}</p>
                        {% endif %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="form-group">
            <div style="display: flex; align-items: center; gap: 10px; margin-top: 15px">
                <label for="last_name">Фамилия: </label>
                <input type="text" class="form-control" id="last_name"
                       name="last_name" value="{{ last_name if last_name else telegram_user.last_name }}"
                       placeholder="{{ telegram_user.last_name if telegram_user.last_name else 'Введите фамилию' }}">
            </div>
            {% if errors %}
                <div class="text-danger">
                    {% for error in errors %}
                        {% if error['loc'][0] == 'last_name' %}
                            <p>{{ error['msg'] }}</p>
                        {% endif %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="form-group">
            <div style="display: flex; align-items: center; gap: 10px; margin-top: 15px">
                <label for="phone">Телефон: </label>
                <input type="text" class="form-control" id="phone" name="phone" value="{{ phone }}" placeholder="+79775263797">
            </div>
            {% if errors %}
                <div class="text-danger">
                    {% for error in errors %}
                        {% if error['loc'][0] == 'phone' %}
                            <p>{{ error['msg'] }}</p>
                        {% endif %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <br>
        <div class="form-group">
            <div style="display: flex; align-items: center; gap: 10px; margin-top: 15px">
                <label for="region">Регион: </label>
                <input type="text" class="form-control" id="region" name="region" value="{{ region }}" placeholder="Москва">
            </div>
            {% if errors %}
                <div class="text-danger">
                    {% for error in errors %}
                        {% if error['loc'][0] == 'region' %}
                            <p>{{ error['msg'] }}</p>
                        {% endif %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div style="margin-top: 15px">
            <button type="submit" class="btn btn-success">Зарегистрироваться</button>
        </div>
    </form>
    <br>
    <br>
    <div style="margin-top: 20px">
        <a href="/" class="btn btn-primary">Назад</a>
    </div>
{% endblock %}

{% block footer %}
    {% include "components/unclickable_footer.html" %}
{% endblock %}
