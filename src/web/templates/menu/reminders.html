{% extends 'base.html' %}

{% block title %}
    –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
{% endblock %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="/static/css/menu/reminders.css">
{% endblock %}

{% block body %}
    <h1 class="section-title">–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ </h1>

    <div class="reminders-container">
        <div class="reminder-card">
            <div class="card-header">
                <div class="card-icon">‚è∞</div>
                <h2 class="card-title">–ë–ª–∏–∂–∞–π—à–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</h2>
            </div>

            <div class="reminders-list">
                {% if health_count > 0 %}
                    {% for pet in pets_health %}
                        {% if pet.next_vaccination and pet.days_next_vaccination > 0 %}
                            <div class="reminder-item">
                                <div class="reminder-icon">üíâ</div>
                                <div class="reminder-info">
                                    <span class="reminder-title">–í–∞–∫—Ü–∏–Ω–∞—Ü–∏—è {{ pet.name }}</span>
                                    <span class="reminder-date">—á–µ—Ä–µ–∑ {{ pet.days_next_vaccination }}
                                        {% if pet.days_next_vaccination == 1 %}–¥–µ–Ω—å
                                        {% elif 2 <= pet.days_next_vaccination <= 4 %}–¥–Ω—è
                                        {% else %}–¥–Ω–µ–π
                                        {% endif %}
                                    </span>
                                </div>
                            </div>
                        {% endif %}

                        {% if pet.next_parasite_treatment and pet.days_next_parasite_treatment > 0 %}
                            <div class="reminder-item">
                                <div class="reminder-icon">ü™±</div>
                                <div class="reminder-info">
                                    <span class="reminder-title">–û–±—Ä–∞–±–æ—Ç–∫–∞ {{ pet.name }} –æ—Ç –ø–∞—Ä–∞–∑–∏—Ç–æ–≤</span>
                                    <span class="reminder-date">—á–µ—Ä–µ–∑ {{ pet.days_next_parasite_treatment }}
                                        {% if pet.days_next_parasite_treatment == 1 %}–¥–µ–Ω—å
                                        {% elif 2 <= pet.days_next_parasite_treatment <= 4 %}–¥–Ω—è
                                        {% else %}–¥–Ω–µ–π
                                        {% endif %}
                                    </span>
                                </div>
                            </div>
                        {% endif %}

                        {% if pet.next_fleas_ticks_treatment and pet.days_fleas_ticks_treatment > 0 %}
                            <div class="reminder-item">
                                <div class="reminder-icon">üêú</div>
                                <div class="reminder-info">
                                    <span class="reminder-title">–û–±—Ä–∞–±–æ—Ç–∫–∞ {{ pet.name }} –æ—Ç –∫–ª–µ—â–µ–π</span>
                                    <span class="reminder-date">—á–µ—Ä–µ–∑ {{ pet.days_fleas_ticks_treatment }}
                                        {% if pet.days_fleas_ticks_treatment == 1 %}–¥–µ–Ω—å
                                        {% elif 2 <= pet.days_fleas_ticks_treatment <= 4 %}–¥–Ω—è
                                        {% else %}–¥–Ω–µ–π
                                        {% endif %}
                                    </span>
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}

                {% else %}
                    <div class="no-reminders">
                        <span class="no-reminders-text">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π</span>
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="stats-card">
            <div class="card-header">
                <div class="card-icon">üë§</div>
                <h2 class="card-title">–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            </div>

            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number">{{ user_report_count }}</div>
                    <div class="stat-label">–í–∞—à–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ user_pet_count }}</div>
                    <div class="stat-label">–í–∞—à–∏—Ö –ø–∏—Ç–æ–º—Ü–µ–≤</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ user_notification_count }}</div>
                    <div class="stat-label">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤–∞–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø—Ä–æ–ø–∞–∂–µ</div>
                </div>
            </div>
        </div>

        <div class="stats-card">
            <div class="card-header">
                <div class="card-icon">üìä</div>
                <h2 class="card-title">–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            </div>

            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number">{{ user_count }}</div>
                    <div class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ report_count }}</div>
                    <div class="stat-label">–û–±—ä—è–≤–ª–µ–Ω–∏–π</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ pet_count }}</div>
                    <div class="stat-label">–ü–∏—Ç–æ–º—Ü–µ–≤</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ notification_count }}</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}
{% endblock %}

{% block tg_button %}
    <script src="/static/js/backButtonController.js"></script>
    <script>
        setupMainPage();
    </script>
{% endblock %}
